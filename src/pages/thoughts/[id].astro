---
import { getCollection, render } from "astro:content";
import Gap from "../../components/gap.astro";
import Heading from "../../components/heading.astro";
import Layout from "../../components/layout.astro";
import DateText from "../../components/date-text.astro";
import Card from "../../components/card.astro";

export async function getStaticPaths() {
  const thoughts = await getCollection("thoughts");
  return thoughts.map((thought) => {
    const { data } = thought;
    const { slug } = data;

    return {
      params: { id: slug },
      props: { thought },
    };
  });
}

const { thought } = Astro.props;
const {
  data: { title, date },
} = thought;
const { Content } = await render(thought);
---

<Layout title={title}>
  <Card classNames="p-0">
    <Gap classNames="p-4">
      <Heading variant="h1">{title} </Heading>
      <DateText date={date} />
      <Content />
    </Gap>
  </Card>
</Layout>
